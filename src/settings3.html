<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Settings</title>
  <style>
  body {
    font-family: Verdana, sans-serif;
    padding: 10px;
    background: #eee;
  }
  h1 {
    font-size: 16px;
    margin: 0;
    padding: 0 0 10px 0;
  }
  ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  ul > li {
    font-size: 14px;
    padding: 3px 0;
  }
  </style>
  <!-- <link rel="stylesheet" href="style.css"> -->

</head>
<body>
  <script>
  'use strict'
  const {ipcRenderer} = require('electron');
  let currentColor = ipcRenderer.sendSync('get_bgcolor'); //同期通信を試みる
  </script>

  <h1>Background Color</h1>
  <ul>
    <li><label><input type="radio" name="colors" value="skyblue">
    Skyblue</label></li>
    <li><label><input type="radio" name="colors" value="tomato">
    Tomato</label></li>
    <li><label><input type="radio" name="colors" value="slategray">
    Slate Gray</label></li>
  </ul>
  <script>
    'use strict';
    let colors = document.getElementsByName('colors');
    for (let i = 0; i < colors.length; i++){ //forループしてるが、htmlのulはイテレータとして扱えるのか
     //色の初期値をラジオボタンに反映。同期通信より
     if (currentColor === colors[i].value){
       colors[i].checked = true;
     }
     //色それぞれに対してイベントを設定。for文は読み込み時に一度処理されるようだ
     colors[i].addEventListener('change',function(event){
       let color = this.value;
       console.log(color);
       //色の変化が発生した時、ipcによりmainへ送る。チャネル名は好きに指定
       ipcRenderer.send('settings_changed', color);
     })
    }
  </script>

</body>
